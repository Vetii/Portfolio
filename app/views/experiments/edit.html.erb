<% content_for :title, "Editing an experiment" %>
<body>
  <div class="row">
    <div class="small-12 large-12 small-centered large-centered columns">
      <h1>Experiment editor</h1>
    </div>
  </div>

  <div class="row">
    <%= form_for :post, url: experiment_path(@exp.id),  method: :patch do |f| %>

      <% if @exp.errors.any? %>
        <div id="errorExplanation">
          <h2><%= pluralize(@exp.errors.count, "error") %>
            prohibited this post from being saved:</h2>
          <ul>
            <% @exp.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %> 

      <div class="small-12 large-7 columns">
        <p>
        <%= f.label :title %>
        <%= f.text_field :title, value: @exp.title %>
        </p>
      </div>
      <div class="small-12 large-5 columns">
        <p>
        <%= f.label :image %>
        <ul class="large-block-grid-4 small-block-grid-2">
          <!-- Listing the files in app/assets/images/experiments -->
          <% Dir.entries("#{Rails.root}/app/assets/images/experiments").each do |img|%>
            <% if img=~/[^\.]+/ then %>
              <li>
              <%= image_tag "experiments/#{img}", :alt => img , :class => "th"%>
              <% if img == @exp.image then %>
                <%= f.radio_button :image, img, :checked => true %>
              <% else %>
                <%= f.radio_button :image, img %>
              <% end %>


              </li>
            <% end %>
          <% end %>
        </ul>
        </p>
      </div>
    </div>
    <div class="row">
      <div class="small-12 large-10   columns">
        <p>
        <%= f.label :description %>
        <%= f.text_area :description, value: @exp.description%>
        </p>
      </div>
      <div class="small-12 large-2   columns">
        <p>
        <%= f.label :Validation %>
        <%= f.submit :Send%>
        </p>
      </div>
    <% end %>
  </div>
  <%= link_to "back to experiments", experiments_path %>
</body>
